<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:OrderManagement.WpfClient"
             xmlns:Entities="clr-namespace:OrderManagement.Client.Entities;assembly=OrderManagement.Client.Entities"
             x:Class="OrderListView"
             mc:Ignorable="d"
             d:DesignHeight="700"
             d:DesignWidth="815">
    <UserControl.Resources>
        <CollectionViewSource x:Key="OrderClientViewSource"
                              d:DesignSource="{d:DesignInstance {x:Type Entities:OrderClient}, CreateList=True}" />
        <CollectionViewSource x:Key="OrderDetailClientViewSource"
                              d:DesignSource="{d:DesignInstance {x:Type Entities:OrderDetailClient}, CreateList=True}" />
    </UserControl.Resources>
    <UserControl.DataContext>
        <Binding Mode="OneWay"
                 Source="{StaticResource Locator}" />
    </UserControl.DataContext>
    <Grid DataContext="{StaticResource OrderClientViewSource}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="91*" />
            <RowDefinition Height="107*" />
            <RowDefinition Height="18*" />
        </Grid.RowDefinitions>
        <Grid x:Name="ConditionsGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto"
                                  MinWidth="207" />
                <ColumnDefinition Width="69*" />
                <ColumnDefinition Width="149*" />
                <ColumnDefinition Width="87*" />
                <ColumnDefinition Width="239*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Label Content="客户编号:"
                   Grid.Column="0"
                   HorizontalAlignment="Left"
                   Grid.Row="0"
                   VerticalAlignment="Center" />
            <TextBox x:Name="CustomerIdTextBox"
                     Grid.Column="1"
                     HorizontalAlignment="Left"
                     Grid.Row="0"
                     Text="{Binding CustomerId, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                     VerticalAlignment="Center"
                     Width="120" />
            <Label Content="订单日期:"
                   Grid.Column="2"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Center" />
            <DatePicker x:Name="OrderDateDatePicker"
                        Grid.Column="3"
                        HorizontalAlignment="Left"
                        SelectedDate="{Binding OrderDate, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                        VerticalAlignment="Center"
                        Width="120" />
            <Label Content="订单号码:"
                   Grid.Column="4"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Center" />
            <TextBox x:Name="OrderIdTextBox"
                     Grid.Column="5"
                     HorizontalAlignment="Left"
                     Text="{Binding OrderId, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                     VerticalAlignment="Center"
                     Width="120" />
            <Label Content="发货日期:"
                   Grid.Column="0"
                   HorizontalAlignment="Left"
                   Grid.Row="1"
                   VerticalAlignment="Center" />
            <DatePicker x:Name="ShipDateDatePicker"
                        Grid.Column="1"
                        HorizontalAlignment="Left"
                        Grid.Row="1"
                        SelectedDate="{Binding ShipDate, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                        VerticalAlignment="Center"
                        Width="120" />
            <Button x:Name="btnSearch"
                    Content="查询"
                    Grid.Column="5"
                    HorizontalAlignment="Right"
                    Grid.Row="1"
                    VerticalAlignment="Top"
                    Width="75"
                    Margin="0,0,10,0" />
        </Grid>
        <DataGrid x:Name="OrderClientDataGrid"
                  AutoGenerateColumns="False"
                  EnableRowVirtualization="True"
                  ItemsSource="{Binding}"
                  Grid.Row="1"
                  RowDetailsVisibilityMode="VisibleWhenSelected">
            <DataGrid.Columns>
                <DataGridTextColumn x:Name="CustomerIdColumn"
                                    Binding="{Binding CustomerId}"
                                    Header="客户编号"
                                    Width="SizeToHeader" />
                <DataGridTemplateColumn x:Name="OrderDateColumn"
                                        Header="订单日期"
                                        Width="SizeToHeader">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DatePicker SelectedDate="{Binding OrderDate, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn x:Name="OrderIdColumn"
                                    Binding="{Binding OrderId}"
                                    Header="订单号码"
                                    Width="SizeToHeader" />
                <DataGridTemplateColumn x:Name="ShipDateColumn"
                                        Header="发货日期"
                                        Width="SizeToHeader">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DatePicker SelectedDate="{Binding ShipDate, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <DataGrid x:Name="OrderDetailClientDataGrid"
                  AutoGenerateColumns="False"
                  EnableRowVirtualization="True"
                  ItemsSource="{Binding Source={StaticResource OrderDetailClientViewSource}}"
                  Grid.Row="2"
                  RowDetailsVisibilityMode="VisibleWhenSelected">
            <DataGrid.Columns>
                <DataGridTextColumn x:Name="LinkColumn"
                                    Binding="{Binding Link}"
                                    Header="采购链接"
                                    Width="SizeToHeader" />
                <DataGridTextColumn x:Name="OrderDetailIdColumn"
                                    Binding="{Binding OrderDetailId}"
                                    Header="订单明细编号"
                                    Width="SizeToHeader" />
                <DataGridTextColumn x:Name="OrderIdColumn1"
                                    Binding="{Binding OrderId}"
                                    Header="订单编号"
                                    Width="SizeToHeader" />
                <DataGridTextColumn x:Name="ProductIdColumn"
                                    Binding="{Binding ProductId}"
                                    Header="产品编号"
                                    Width="SizeToHeader" />
                <DataGridTextColumn x:Name="PurchasePriceColumn"
                                    Binding="{Binding PurchasePrice}"
                                    Header="采购价格"
                                    Width="SizeToHeader" />
                <DataGridTextColumn x:Name="QuantityColumn"
                                    Binding="{Binding Quantity}"
                                    Header="数量"
                                    Width="SizeToHeader" />
                <DataGridTextColumn x:Name="SoldPriceColumn"
                                    Binding="{Binding SoldPrice}"
                                    Header="售出价格"
                                    Width="SizeToHeader" />
            </DataGrid.Columns>
        </DataGrid>
        <Button x:Name="button"
                Content="Button"
                HorizontalAlignment="Left"
                Margin="730,24,0,0"
                Grid.Row="3"
                VerticalAlignment="Top"
                Width="75" />

    </Grid>
</UserControl>
